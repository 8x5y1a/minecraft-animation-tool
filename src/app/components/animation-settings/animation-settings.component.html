<div class="animation-tabs-wrapper">
  <mat-tab-group [selectedIndex]="tabIndex()">
    @for (properties of animationPropertiesList; track properties; let index =
    $index){
    <mat-tab [label]="'Animation ' + (index + 1)">
      <mat-radio-group
        class=""
        [formControl]="properties.command"
        aria-label="Select an option"
      >
        <mat-radio-button value="set">Set block</mat-radio-button>
        <mat-radio-button value="display">Display block</mat-radio-button>
        <mat-radio-button value="destroy">Destroy block</mat-radio-button>
      </mat-radio-group>
      <div class="content">
        @if(properties.command.value === 'destroy'){
        <mat-form-field>
          <mat-label>Animation to destroy</mat-label>
          <mat-select [formControl]="properties.removeAnimation">
            @for (animation of animationPropertiesList; track animation) {
            @if(animation.command.value !== 'destroy'){
            <mat-option [value]="animation">{{ animation.name }}</mat-option>
            } }
          </mat-select>
        </mat-form-field>
        } @else{
        <h4>Coordinates</h4>
        <div class="coordinates">
          <mat-form-field>
            <mat-label>X</mat-label>
            <input type="number" matInput [formControl]="properties.x" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Y</mat-label>
            <input type="number" matInput [formControl]="properties.y" />
          </mat-form-field>
          <mat-form-field>
            <mat-label>Z</mat-label>
            <input type="number" matInput [formControl]="properties.z" />
          </mat-form-field>
        </div>
        }

        <p>
          <mat-slide-toggle [formControl]="properties.timing">
            Timing
          </mat-slide-toggle>
        </p>

        @if(properties.timing.value){
        <mat-card-content>
          <mat-form-field>
            <mat-label>Block per tick</mat-label>
            <input
              matInput
              matTooltip="Higher value is slower"
              type="number"
              [min]="1"
              [max]="500"
              [formControl]="properties.speed"
            />
          </mat-form-field>
        </mat-card-content>
        } @if(properties.command.value === 'display'){
        <div>
          <mat-form-field>
            <input
              matInput
              type="text"
              [formControl]="properties.scale"
              placeholder="Enter something"
            />
            <mat-label>Scaling</mat-label>
          </mat-form-field>
        </div>
        }
      </div>
      <!-- TODO: Footer style -->
      <div class="footer">
        @if(animationPropertiesList.length > 1){
        <button
          mat-button
          matTooltip="Remove this animation"
          (click)="removeAnimation(index)"
        >
          Remove
        </button>
        }
      </div>
    </mat-tab>
    }
  </mat-tab-group>
  <button
    mat-stroked-button
    matTooltip="Add another animation"
    class="add-animation-btn"
    (click)="addAnimation()"
  >
    <mat-icon style="margin: 0">add</mat-icon>
  </button>
</div>
